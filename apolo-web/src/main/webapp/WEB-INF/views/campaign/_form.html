<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
</head>
<body th:fragment="campaign-form">

<input type="hidden" id="id" name="id" th:value="${campaign.id}"/>
<input type="hidden" id="status" name="status" th:value="${campaign.status}"/>
<input type="hidden" id="tenant.id" name="tenant.id" th:value="${campaign.tenant.id}"/>
<input type="hidden" id="tenant.name" name="tenant.name" th:value="${campaign.tenant.name}"/>
<input type="hidden" id="tenant.url" name="tenant.url" th:value="${campaign.tenant.url}"/>

<ul class="nav nav-tabs" id="formTab" th:with="style=${!readOnly ? 'display: none;' : 'display: block;' }">
    <li class="active">
        <a href="#home">
            <span class="fa fa-tasks"></span>
        </a>
    </li>
    <li th:style="${style}">
        <a href="#authorShipTab">
            <span class="fa fa-user"></span>
        </a>
    </li>
    <li th:style="${style}" th:if="${statusSENT == campaign.status} or ${statusUPDATING == campaign.status}">
        <a href="#campaignReportTab">
            <span class="fa fa-th"></span>
        </a>
    </li>
</ul>

<div class="tab-content">
    <div class="tab-pane active" id="home">
        <div class="form-group">
            <label for="name" class="control-label" th:text="#{campaign.name}">
                campaign.name
            </label>
            <input class="form-control focus"
                   type="text"
                   id="name"
                   name="name"
                   th:value="${campaign.name}"
                   th:readonly="${readOnly}"
                />
        </div>

        <div class="form-group">
            <label for="subject" class="control-label" th:text="#{campaign.subject}">
                campaign.subject
            </label>
            <input class="form-control"
                   type="text"
                   id="subject"
                   name="subject"
                   th:value="${campaign.subject}"
                   th:readonly="${readOnly}"
                    />
        </div>

        <div class="form-group">
            <label for="emailFrom" class="control-label" th:text="#{campaign.emailFrom}">
                campaign.emailFrom
            </label>
            <input class="form-control"
                   type="text"
                   id="emailFrom"
                   name="emailFrom"
                   th:value="${campaign.emailFrom}"
                   th:readonly="${readOnly}"
                    />
        </div>

        <div class="form-group">
            <label for="testMailTo" class="control-label" th:text="#{campaign.testMailTo}">
                campaign.testMailTo
            </label>
            <input class="form-control"
                   type="text"
                   id="testMailTo"
                   name="testMailTo"
                   th:value="${campaign.testMailTo}"
                   th:readonly="${readOnly}"
                    />
        </div>

        <div class="form-group">
            <label for="reportMailTo" class="control-label" th:text="#{campaign.reportMailTo}">
                campaign.reportMailTo
            </label>
            <input class="form-control"
                   type="text"
                   id="reportMailTo"
                   name="reportMailTo"
                   th:value="${campaign.reportMailTo}"
                   th:readonly="${readOnly}"
                    />
        </div>

        <div th:if="${!readOnly}">
            <div class="row">
                <div class="col-sm-12">
                    <label for="listTo"
                           class="control-label"
                           th:text="#{campaign.lists}"
                       />
                </div>

                <div class="col-sm-12">
                    <select name="lists"
                            id="listTo"
                            size="5"
                            multiple="multiple"
                            class="form-control chosen-select"
                            th:disabled="${readOnly}"
                            th:attr="data-placeholder=#{common.select}"
                            style="display: block;"
                            aria-hidden="true"
                            >
                        <option th:if="${distributionList != null} and ${campaign != null} and ${campaign.lists == null}"
                                th:each="list : ${distributionList}"
                                th:value="${list.id}"
                                th:text="${list.name}"
                                />

                        <option th:if="${distributionList != null} and ${campaign != null} and ${campaign.lists != null}"
                                th:each="list : ${distributionList}"
                                th:value="${list.id}"
                                th:text="${list.name}"
                                th:selected="${#lists.contains(campaign.lists, list)}"
                                />
                    </select>
                </div>
            </div>
        </div>

        <div th:if="${readOnly}">
            <div class="form-group">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <strong th:text="#{campaign.lists}" />
                    </div>
                    <ul class="list-group">
                        <li th:each="list : ${campaign.lists}"
                            class="list-group-item">

                            <a sec:authorize="@apoloSecurity.hasPermission('DISTRIBUTION_LIST')"
                               th:href='@{|/${#authentication.systemUser.tenant.url}/distribution/view/${list.id}|}'
                               th:text="${list.name}"
                                    />

                            <span sec:authorize="!@apoloSecurity.hasPermission('DISTRIBUTION_LIST')"
                                  th:text="${list.name}"
                                    />
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label for="html" class="control-label" th:text="#{campaign.html}">
                campaign.html
            </label>
            <textarea id="html"
                      name="html"
                      rows="10"
                      cols="80"
                      th:text="${campaign.html}"
                      class="form-control"
                      th:disabled="${readOnly}"
                    >
                ${campaign.html}
            </textarea>
        </div>
    </div>

    <div class="tab-pane" id="authorShipTab">
        <div th:remove="tag" th:include="@{_fragment/_authorship} :: authorship (entity=${campaign})"></div>
    </div>

    <div class="tab-pane" id="campaignReportTab">
        <div class="row">
            &nbsp;
        </div>

        <div class="row" th:style="${style}">

            <div class="col-md-4 col-sm-6 col-xs-12">
                <div class="info-box bg-yellow">
                    <span class="info-box-icon"><i class="fa fa-send"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text" th:text="#{campaign.dashboard.sent.null}">Bookmarks</span>
                        <span class="info-box-number" th:text="${#numbers.formatInteger(campaign.countNullDispatchedEmails,1,'POINT')}">41,410</span>
                        <div class="progress">
                            <div class="progress-bar" th:style="${'width: '} + ${#numbers.formatInteger(campaign.countNullDispatchedEmailsPercent,1,'POINT')} + ${'%'}"></div>
                        </div>
                        <span class="progress-description" th:text="${#numbers.formatInteger(campaign.countNullDispatchedEmailsPercent,1,'POINT')} + ${'%'}">
                          70% Increase in 30 Days
                        </span>
                    </div><!-- /.info-box-content -->
                </div><!-- /.info-box -->
            </div>

            <div class="col-md-4 col-sm-6 col-xs-12">
                <div class="info-box bg-green">
                    <span class="info-box-icon"><i class="fa fa-send"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text" th:text="#{campaign.dashboard.sent.success}">Bookmarks</span>
                        <span class="info-box-number" th:text="${#numbers.formatInteger(campaign.countSuccessDispatchedEmails,1,'POINT')}">41,410</span>
                        <div class="progress">
                            <div class="progress-bar" th:style="${'width: '} + ${#numbers.formatInteger(campaign.countSuccessDispatchedEmailsPercent,1,'POINT')} + ${'%'}"></div>
                        </div>
                        <span class="progress-description" th:text="${#numbers.formatInteger(campaign.countSuccessDispatchedEmailsPercent,1,'POINT')} + ${'%'}">
                          70% Increase in 30 Days
                        </span>
                    </div><!-- /.info-box-content -->
                </div><!-- /.info-box -->
            </div>

            <div class="col-md-4 col-sm-6 col-xs-12">
                <div class="info-box bg-red">
                    <span class="info-box-icon"><i class="fa fa-send"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text" th:text="#{campaign.dashboard.sent.error}">Bookmarks</span>
                        <span class="info-box-number" th:text="${#numbers.formatInteger(campaign.countErrorDispatchedEmails,1,'POINT')}">41,410</span>
                        <div class="progress">
                            <div class="progress-bar" th:style="${'width: '} + ${#numbers.formatInteger(campaign.countErrorDispatchedEmailsPercent,1,'POINT')} + ${'%'}"></div>
                        </div>
                        <span class="progress-description" th:text="${#numbers.formatInteger(campaign.countErrorDispatchedEmailsPercent,1,'POINT')} + ${'%'}">
                          70% Increase in 30 Days
                        </span>
                    </div><!-- /.info-box-content -->
                </div><!-- /.info-box -->
            </div>

        </div>

        <div class="row">
            <div class="col-md-6 col-sm-6 col-xs-12">
                <div class="info-box bg-aqua">
                    <span class="info-box-icon"><i class="fa fa-folder-open"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text" th:text="#{campaign.dashboard.sent.opens}">Bookmarks</span>
                        <span class="info-box-number" th:text="${#numbers.formatInteger(campaign.sumOpens,1,'POINT')}">41,410</span>
                    </div><!-- /.info-box-content -->
                </div><!-- /.info-box -->
            </div>

            <div class="col-md-6 col-sm-6 col-xs-12">
                <div class="info-box bg-aqua">
                    <span class="info-box-icon"><i class="fa fa-folder-open"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text" th:text="#{campaign.dashboard.sent.opens.unique}">Bookmarks</span>
                        <span class="info-box-number" th:text="${#numbers.formatInteger(campaign.countOpens,1,'POINT')}">41,410</span>
                    </div><!-- /.info-box-content -->
                </div><!-- /.info-box -->
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 col-sm-6 col-xs-12">
                <div class="info-box bg-green">
                    <span class="info-box-icon"><i class="fa fa-mouse-pointer"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text" th:text="#{campaign.dashboard.sent.clicks}">Bookmarks</span>
                        <span class="info-box-number" th:text="${#numbers.formatInteger(campaign.sumClicks,1,'POINT')}">41,410</span>
                    </div><!-- /.info-box-content -->
                </div><!-- /.info-box -->
            </div>

            <div class="col-md-6 col-sm-6 col-xs-12">
                <div class="info-box bg-green">
                    <span class="info-box-icon"><i class="fa fa-mouse-pointer"></i></span>
                    <div class="info-box-content">
                        <span class="info-box-text" th:text="#{campaign.dashboard.sent.clicks.unique}">Bookmarks</span>
                        <span class="info-box-number" th:text="${#numbers.formatInteger(campaign.countClicks,1,'POINT')}">41,410</span>
                    </div><!-- /.info-box-content -->
                </div><!-- /.info-box -->
            </div>
        </div>

        <div class="row">
            &nbsp;
        </div>

        <div class="row">
            <div class="col-sm-12">
                <a sec:authorize="@apoloSecurity.hasPermission('CAMPAIGN_LIST')"
                   th:href='@{|/${#authentication.systemUser.tenant.url}/campaign/download-dispatched/${campaign.id}|}'
                   th:if="${statusSENT == campaign.status}"
                   class="btn btn-primary"
                   data-toggle="tooltip">
                    <i class="fa fa-download"></i>
                    <span th:text="#{campaign.sent.download.list}" />
                </a>
            </div>
        </div>

        <div class="row">
            &nbsp;
        </div>
    </div>
</div>
<div id="overlay" class="transparent"></div>

<div id="menu-space" style="display:none;">&nbsp;</div>
</body>
</html>